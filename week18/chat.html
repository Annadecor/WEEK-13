<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>

        .container {
            width:50%;
            height: 60vh;
            background-color: aquamarine;        

        }      

#btn{   
background-color: dodgerblue;
  color: white;
  border: none;
  cursor: pointer;
  width: 20%;
  height: 8%;
  border-radius: 5%;
 
}

.comment{
    color:green;
    font-weight: bold;
}

.author{
    color:blue;
    font-weight: bold;
}
#chat{
    width: 20%;
    height: 30%;
    border:red solid 1px;
}
</style>
</head>

<body>

<div class="container">
   <h2>Chat</h2>
   <div id="avatarka"></div>
   <div id="chat"></div>
   <form>
    <div>
    <label for="author">Name* <br>
    <span id="authorError"></span>
    </label>
    </div>
    <div>
    <input type="text" id="author" name="author" value="" class="inputs"/>
    </div>

    <div>
        <label for="link">link avatar <br>
        </label> </div>
        <div>
        <input type="text" id="link" name="link" value="" class="inputs"/>
        </div>

    <div>
<label for="commenttext">Comment
    <span id="commentError"></span>
</label> </div>

<div>
<textarea class="inputs" id="comment" name="comment"></textarea>
</div>

<div>
    <input type="button" id="btn" name="button" value="Send" onclick="checkMessage();"/> <br>
</div>
<div><button id="btn" class="clear">Clear storage</button></div>

</form>
<script>

document.addEventListener("DOMContentLoaded", function(event) {
    let name=localStorage.getItem('authorName');
    if (name !==null) {
        document.getElementById("author").value = name;
    }

    let avat=localStorage.getItem('linkavatar');
    if (avat !==null) {
        document.getElementById("link").value = avat;
    }
});
  

function checkMessage() {
    let author = document.getElementById("author").value;
    let comment = document.getElementById("comment").value;
    let avatar=document.getElementById("link").value;

    console.log(author);
    console.log(comment);
    console.log(avatar);    

    if(localStorage.getItem('authorName')==null) {
    localStorage.setItem('authorName', author);}

  
    if(localStorage.getItem('comment')==null) {
    localStorage.setItem('commenttext', comment);}

    if(localStorage.getItem('linkavatar')==null) {
    localStorage.setItem('linkavatar', avatar); }



    sendMessage(author, comment,avatar);
   
} 

function sendMessage(author, comment,avatar) {
    document.getElementById("chat").
    innerHTML += `<span class='author'>${author}:</span><span>${comment}</span><br>`;

document.getElementById("avatarka").innerHTML=`<img src='${avatar}' width='50' height='50'>`;}

// ссылка на аватарку https://w7.pngwing.com/pngs/500/123/png-transparent-kitten-cat-avatar-hd-cat-avatar-mammal-3d-computer-graphics-heroes.png//

document.querySelector('.clear').onclick = () => {
    // очищаем хранилище
    localStorage.clear()}


 


</script>
    
</body>
</html>